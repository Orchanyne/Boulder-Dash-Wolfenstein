var mapVanilla = [
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"]
    ];

var map1 = [
    ["E","D","T","V","M","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"],
    ["T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T","T"]
    ];


for (let i = 1; i <= 16; i++) {
    for (let j = 1; j <= 32; j++) {
        let div = document.createElement("div");
        div.classList.add("case");
        div.id = i+";"+j;
        let type = map1[i-1][j-1];
        div.style.backgroundImage = 'url("'+getUrl(type)+'")';
        div.style.backgroundRepeat = "no-repeat";
        div.style.backgroundPosition = "center";
        div.style.backgroundSize = "100%";
        document.getElementById('grille').appendChild(div);
    }
}

document.getElementById("1;1").style.content = 'url("../sprite/stickman.png")';
let position = document.getElementById("1;1").id;
let positionY = position.substring(0, 1);
let positionX = position.substring(2, 3);


window.addEventListener("keydown", function (event) {
    if (event.defaultPrevented) {
      return; // Ne devrait rien faire si l'événement de la touche était déjà consommé.
    }
  
    switch (event.key) {
      case "ArrowDown":
        if(parseInt(positionY)+1 <= 16){
            document.getElementById(position).style.content = "";
            console.log(position);
            positionY = parseInt(positionY)+1;
            position = positionY+";"+positionX;
            console.log(position);
            document.getElementById(position).style.content = 'url("../sprite/stickman.png")';
        }
        break;
      case "ArrowUp":
        if(parseInt(positionY)-1 >= 1){
            document.getElementById(position).style.content = "";
            console.log(position);
            positionY = parseInt(positionY)-1;
            position = positionY+";"+positionX;
            console.log(position);
            document.getElementById(position).style.content = 'url("../sprite/stickman.png")';
        }
        break;
      case "ArrowLeft":
        if(parseInt(positionX)-1 >= 1){
            document.getElementById(position).style.content = "";
            console.log(position);
            positionX = parseInt(positionX)-1;
            position = positionY+";"+positionX;
            console.log(position);
            document.getElementById(position).style.content = 'url("../sprite/stickman.png")';
        }
        break;
      case "ArrowRight":
        if(parseInt(positionX)+1 <= 32){
            document.getElementById(position).style.content = "";
            console.log(position);
            positionX = parseInt(positionX)+1;
            position = positionY+";"+positionX;
            console.log(position);
            document.getElementById(position).style.content = 'url("../sprite/stickman.png")';
        }
        break;
      case "Enter":
        // Faire quelque chose pour les touches "enter" ou "return" pressées.
        break;
      case "Escape":
        // Faire quelque chose pour la touche "esc" pressée.
        break;
      default:
        return; // Quitter lorsque cela ne gère pas l'événement touche.
    }
  
    // Annuler l'action par défaut pour éviter qu'elle ne soit traitée deux fois.
    event.preventDefault();
  }, true);


  function checkElement(cordoonnee) {
    let positionX = getCoordX(cordoonnee);
    let positionY = getCoordY(cordoonnee);
    let typeCase = map1[positionY][positionX];
    let ok = true;
    if(typeCase == 'E' || typeCase == 'M'){
        ok = false;
    }
    return ok;
  }



  function getCoordX(cordoonnee) {
    let positionX = position.substring(2, 3);
    return positionX;
  }

  function getCoordY(cordoonnee) {
    let positionY = position.substring(0, 1);
    return positionY;
  }


 function getUrl(type) {
    let url = "";
    switch (type) {
        case "E":
            url = "../sprite/enemie.png";
            break;
        case "D":
            url = "../sprite/diamant.png";
            break;
        case "T":
            url = "../sprite/terre.png";
            break;
        case "V":
            url = "../sprite/vide.png";
            break;
        case "M":
            url = "../sprite/mur.png";
            break;
    }
    return url;
}


